CREATE SEQUENCE SUPER_ANDES_SEQUENCE;

CREATE TABLE PRODUCTOS(
            ID NUMBER,
            NOMBRE VARCHAR2(256 BYTE),
            TAMANO NUMBER,
            UNIDADES VARCHAR2(3),
            MARCA VARCHAR2(64),
            PRECIO_UNITARIO NUMBER,
            VOL_EMPAQUE NUMBER,
            PESO_EMPAQUE NUMBER,
            HEXA NUMBER,
            PRESENTACION VARCHAR2(64),
            PRECIO_POR_UNIDAD NUMBER,
            CATEGORIA VARCHAR2(64),
            CONSTRAINT PRODUCTOS_PK PRIMARY KEY(ID));
            
CREATE TABLE PROMOCION( 
            ID NUMBER,
            NOMBRE VARCHAR2(256 BYTE),
            TAMANO NUMBER,
            UNIDADES VARCHAR2(3),
            MARCA VARCHAR2(64),
            PRECIO_UNITARIO NUMBER,
            VOL_EMPAQUE NUMBER,
            PESO_EMPAQUE NUMBER,
            HEXA NUMBER,
            PRESENTACION VARCHAR2(64),
            PRECIO_POR_UNIDAD NUMBER,
            CATEGORIA VARCHAR2(64),
            DESCRIPCION VARCHAR(256),
            CONSTRAINT PROMOCION_PK PRIMARY KEY(ID));
            
CREATE TABLE SUCURSAL(
            ID NUMBER,
            CIUDAD VARCHAR2(32),
            DIRECCION VARCHAR2(128),
            SEGMENTO_MERCADO VARCHAR2(32),
            CONSTRAINT SUCURSAL_PK PRIMARY KEY(ID));
            
CREATE TABLE BODEGA(
            ID NUMBER,
            CAPACIDAD_VOL NUMBER,
            CAPACIDAD_PESO NUMBER,
            CATEGORIA VARCHAR2(16),
            ID_SUCURSAL NUMBER,
            CONSTRAINT BODEGA_PK PRIMARY KEY(ID));
            
ALTER TABLE BODEGA
            ADD CONSTRAINT fk_sucursal
            FOREIGN KEY (ID_SUCURSAL)
            REFERENCES SUCURSAL(ID)
            ENABLE;
            
CREATE TABLE ESTANTE(
            ID NUMBER,
            CAPACIDAD_VOL NUMBER,
            CAPACIDAD_PESO NUMBER,
            CATEGORIA VARCHAR2(16),
            POSICION NUMBER,
            NIVEL_ABASTECIMIENTO NUMBER,
            ID_SUCURSAL NUMBER,
            CONSTRAINT ESTANTE_PK PRIMARY KEY(ID));
            
ALTER TABLE ESTANTE
            ADD CONSTRAINT fk_sucursal
            FOREIGN KEY (ID_SUCURSAL)
            REFERENCES SUCURSAL(ID)
            ENABLE;
            
CREATE TABLE PROVEEDOR(
            NIT NUMBER,
            NOMBRE VARCHAR2(64),
            CALIFICACION NUMBER,
            CONSTRAINT PROVEEDOR_PK PRIMARY KEY(ID));

CREATE TABLE ORDEN_DE_COMPRA(
            ID NUMBER,
            FECHA_ESTIMADA_ENTREGA VARCHAR2(16),
            ENTREGADO NUMBER(1),
            CALIFICACION NUMBER,
            FECHA_ENTREGA VARCHAR2(16),
            ID_PROVEEDOR NUMBER,
            CONSTRAINT ORDEN_DE_COMPRA_PK PRIMARY KEY(ID));
            
ALTER TABLE ORDEN_DE_COMPRA
            ADD CONSTRAINT fk_proveedor
            FOREIGN KEY (ID_PROVEEDOR)
            REFERENCES PROVEEDOR(ID)
            ENABLE;
            
            
CREATE TABLE CLIENTE(
            ID NUMBER,
            TIPO_IDENTIFICACION VARCHAR2(12),
            IDENTIFICACION NUMBER,
            NOMBRE VARCHAR2(32),
            CORREO VARCHAR2(32),
            DIRECCION VARCHAR2(128),
            CONSTRAINT CLIENTE_PK PRIMARY KEY(ID));

CREATE TABLE COMPRA(
            ID NUMBER,
            PRECIO_TOTAL NUMBER,
            PAGADA NUMBER(1),
            ID_CLIENTE NUMBER,
            ID_SUCURSAL NUMBER,
            CONSTRAINT COMPRA_PK PRIMARY KEY(ID));
            
ALTER TABLE COMPRA
            ADD CONSTRAINT fk_cliente
            FOREIGN KEY (ID_CLIENTE)
            REFERENCES CLIENTE(ID)
            ENABLE;

ALTER TABLE COMPRA
            ADD CONSTRAINT fk_sucursal
            FOREIGN KEY (ID_SUCURSAL)
            REFERENCES SUCURSAL(ID)
            ENABLE;
            
CREATE TABLE FACTURA(
            NUMERO_SERIE NUMBER,
            FECHA VARCHAR2(16),
            ID_COMPRA NUMBER,
            CONSTRAINT FACTURA_PK PRIMARY KEY(NUMERO_SERIE));
            
ALTER TABLE FACTURA
            ADD CONSTRAINT fk_compra
            FOREIGN KEY (ID_COMPRA)
            REFERENCES COMPRA(ID)
            ENABLE;
            
CREATE TABLE BODEGA_PRODUCTO(
            ID_PRODUCTO NUMBER,
            ID_BODEGA NUMBER,
            CANTIDAD NUMBER,
            CONSTRAINT BODEGA_PRODUCTO_PK PRIMARY KEY(ID_PRODUCTO, ID_BODEGA));

ALTER TABLE BODEGA_PRODUCTO
            ADD CONSTRAINT fk_producto
            FOREIGN KEY (ID_PRODUCTO)
            REFERENCES PRODUCTOS(ID)
            ENABLE;
            
ALTER TABLE BODEGA_PRODUCTO
            ADD CONSTRAINT fk_bodega
            FOREIGN KEY (ID_BODEGA)
            REFERENCES BODEGA(ID)
            ENABLE;

CREATE TABLE ESTANTE_PRODUCTO(
            ID_PRODUCTO NUMBER,
            ID_ESTANTE NUMBER,
            CANTIDAD NUMBER,
            CONSTRAINT ESTANTE_PRODUCTO_PK PRIMARY KEY(ID_PRODUCTO, ID_ESTANTE));

ALTER TABLE ESTANTE_PRODUCTO
            ADD CONSTRAINT fk_producto
            FOREIGN KEY (ID_PRODUCTO)
            REFERENCES PRODUCTOS(ID)
            ENABLE;
            
ALTER TABLE ESTANTE_PRODUCTO
            ADD CONSTRAINT fk_estante
            FOREIGN KEY (ID_ESTANTE)
            REFERENCES ESTANTE(ID)
            ENABLE;
            
CREATE TABLE ORDEN_DE_COMPRA_PRODUCTO(
            ID_ORDEN_DE_COMPRA NUMBER,
            ID_PRODUCTO NUMBER,
            PRECIO_ACORDADO NUMBER,
            VOLUMEN NUMBER,
            CONSTRAINT ORDEN_COMPRA_PRODUCTO_PK PRIMARY KEY(ID_ORDEN_DE_COMPRA, ID_PRODUCTO));

ALTER TABLE ORDEN_DE_COMPRA_PRODUCTO
            ADD CONSTRAINT fk_producto
            FOREIGN KEY (ID_PRODUCTO)
            REFERENCES PRODUCTOS(ID)
            ENABLE;
            
ALTER TABLE ORDEN_DE_COMPRA_PRODUCTO
            ADD CONSTRAINT fk_orden_de_compra
            FOREIGN KEY (ID_ORDEN_DE_COMPRA)
            REFERENCES ORDEN_DE_COMPRA(ID)
            ENABLE;
            
CREATE TABLE PRODUCTO_COMPRA(
            ID_COMPRA NUMBER,
            ID_PRODUCTO NUMBER,
            CANTIDAD NUMBER,
            CONSTRAINT PRODUCTO_COMPRA_PK PRIMARY KEY(ID_COMPRA, ID_PRODUCTO));
            
ALTER TABLE PRODUCTO_COMPRA
            ADD CONSTRAINT fk_compra
            FOREIGN KEY (ID_COMPRA)
            REFERENCES COMPRA(ID)
            ENABLE;
            
ALTER TABLE PRODUCTO_COMPRA
            ADD CONSTRAINT fk_producto
            FOREIGN KEY (ID_PRODUCTO)
            REFERENCES PRODUCTOS(ID)
            ENABLE;
            
CREATE TABLE PROVEEDOR_PRODUCTO(
            ID_PROVEEDOR NUMBER,
            ID_PRODUCTO NUMBER,
            CONSTRAINT PROVEEDOR_PRODUCTO_PK PRIMARY KEY(ID_PROVEEDOR, ID_PRODUCTO));
            
ALTER TABLE PROVEEDOR_COMPRA
            ADD CONSTRAINT fk_producto
            FOREIGN KEY (ID_PRODUCTO)
            REFERENCES PRODUCTOS(ID)
            ENABLE;

ALTER TABLE PROVEEDOR_COMPRA
            ADD CONSTRAINT fk_proveedor
            FOREIGN KEY (ID_PROVEEDOR)
            REFERENCES PROVEEDOR(ID)
            ENABLE;
            
CREATE TABLE SUCURSAL_PRODUCTO(
            ID_SUCURSAL NUMBER,
            ID_PRODUCTO NUMBER,
            PRECIO NUMBER,
            NIVEL_REORDEN NUMBER,
            CONSTRAINT SUCURSAL_PRODUCTO_PK PRIMARY KEY (ID_SUCURSAL, ID_PRODUCTO));
            
ALTER TABLE SUCURSAL_PRODUCTO
            ADD CONSTRAINT fk_sucursal
            FOREIGN KEY (ID_SUCURSAL)
            REFERENCES SUCURSAL(ID)
            ENABLE;
            
ALTER TABLE SUCURSAL_PRODUCTO
            ADD CONSTRAINT fk_producto
            FOREIGN KEY (ID_PRODUCTO)
            REFERENCES PRODUCTOS(ID)
            ENABLE;
        
COMMIT;


        
